# Голосовой ассистент с функциями камеры

## Основные компоненты:

1. MainActivity - главный экран приложения
2. VoiceChatActivity - активность для голосового общения
3. CameraActivity - активность для работы с камерой
4. AccessibilitySettingsActivity - настройки доступности
5. CommandProcessor - обработчик голосовых команд
6. AccessibilityManager - менеджер функций доступности

## Функции доступности:

- Изменение размера текста
- Высококонтрастный режим
- Голосовая обратная связь
- Вибрационная обратная связь
- Автоматическая съемка

## Голосовые команды:

- Открытие камеры
- Описание объектов
- Возврат к чату

## TODO:
- [ ] Добавить дополнительные голосовые команды
- [ ] Улучшить распознавание объектов
- [ ] Расширить настройки доступности

## Описание
Android-приложение с голосовым ассистентом в виде дружелюбного робота, способным совершать звонки, отправлять SMS сообщения и открывать веб-страницы.

## Основные возможности

### Голосовое управление
- Распознавание голосовых команд
- Голосовой ответ на действия
- Поддержка русского языка

### Телефония и сообщения
- Совершение звонков по имени контакта или номеру
- Отправка SMS сообщений

### Веб-браузер
- Открытие веб-страниц в Chrome Custom Tabs
- Поддержка прямых URL (например, "открой google.com")
- Поиск в Google (например, "найди рецепт борща")
- Автоматическое добавление https:// к ссылкам
- Fallback на браузер по умолчанию, если Chrome не установлен

### Анализ изображений
- "Что сейчас видно на камере?"
- "Посмотри что-нибудь через камеру"
- "Опиши что видишь на камере"

## История изменений
- 09.03.2024: Инициализация проекта
- 09.03.2024: Добавлена базовая структура приложения
- 09.03.2024: Добавлена поддержка системных промптов
- 09.03.2024: Добавлены разрешения и базовый функционал для звонков и SMS
- 09.03.2024: Добавлены диалоги подтверждения и голосовая обратная связь
- 09.03.2024: Реализована поддержка работы с контактами
- 09.03.2024: Улучшен поиск контактов и голосовая обратная связь
- 09.03.2024: Исправлены ошибки в обработке контактов
- 09.03.2024: Исправлена ошибка приведения типов в анимациях, переработаны анимации звуковых волн
- 09.03.2024: Упрощен интерфейс, удалены анимации, улучшена работа голосового ввода
- 09.03.2024: Добавлена автоматическая остановка записи при тишине
- 09.03.2024: Обновлен системный промпт с подробным описанием возможностей

## Последние изменения

### Ребрендинг (09.03.2024)
1. Изменено название на "Robo - Your AI Assistant"
2. Обновлена иконка приложения:
   - Минималистичный дизайн робота
   - Светло-серый основной цвет (#E0E0E0)
   - Темно-синий фон (#1A237E)
   - Голубые акценты (#40C4FF)
   - Поддержка адаптивных иконок для Android

### Интеграция с браузером (09.03.2024)
1. Добавлена поддержка открытия ссылок:
   - Интеграция Chrome Custom Tabs
   - Обработка URL в голосовых командах
   - Поиск в Google для неполных URL

2. Добавлены новые голосовые команды:
   - "Открой [url]" - прямой переход по ссылке
   - "Найди [запрос]" - поиск в Google
   - "Поиск [запрос]" - поиск в Google

3. Технические улучшения:
   - Добавлена зависимость androidx.browser:browser:1.7.0
   - Создан класс BrowserHelper для работы с URL
   - Добавлены необходимые разрешения в AndroidManifest
   - Реализована проверка наличия Chrome

### Упрощение интерфейса (09.03.2024)
1. Удалены все анимации:
   - Удалены файлы анимаций wave1.xml, wave2.xml, wave3.xml
   - Удалены файлы pulse.xml и wave.xml
   - Упрощен код активности

2. Оптимизирован интерфейс:
   - Оставлена только кнопка микрофона
   - Удалены визуальные индикаторы
   - Улучшена компоновка элементов

3. Улучшена работа голосового ввода:
   - Автоматическое включение после ответа нейросети
   - Включение микрофона после ошибок
   - Оптимизирована обработка состояний

### Оптимизация голосового ввода (09.03.2024)
1. Добавлена автоматическая остановка записи:
   - Определение тишины по уровню звука
   - Остановка через 3 секунды тишины
   - Сброс таймера при обнаружении речи

2. Улучшена обработка состояний:
   - Оптимизирована логика определения речи
   - Добавлена очистка таймеров
   - Улучшена обработка ошибок

3. Технические улучшения:
   - Уменьшено минимальное время записи до 1 секунды
   - Оптимизированы параметры распознавания речи
   - Добавлена защита от утечек памяти

### Улучшение системного промпта (09.03.2024)
1. Добавлено подробное описание возможностей:
   - Телефония и сообщения (звонки, SMS)
   - Веб-браузер (открытие ссылок, поиск)
   - Примеры команд для каждой функции

2. Определены правила общения:
   - Краткость и понятность
   - Использование разговорного стиля
   - Русский язык
   - Профессиональный подход

3. Добавлены инструкции по безопасности:
   - Подтверждение важных действий
   - Защита личных данных
   - Обработка ошибок

### Обновление дизайна чата (10.03.2024)
1. Переработан дизайн сообщений:
   - Добавлен CardView для сообщений
   - Разные цвета фона для пользователя (#E3F2FD) и ассистента (#F5F5F5)
   - Выравнивание сообщений по разным сторонам
   - Тени и скругленные углы для современного вида

2. Улучшена доступность:
   - Поддержка изменения размера текста
   - Высококонтрастный режим
   - Оптимизированная структура для скринридеров

3. Технические улучшения:
   - Создан VoiceChatAdapter для управления сообщениями
   - Оптимизирована работа с AccessibilityManager
   - Улучшена производительность RecyclerView

## Планы на будущее
- Добавление истории посещенных ссылок
- Поддержка других браузеров
- Улучшение распознавания URL в голосовых командах
- Добавление закладок и избранных сайтов

## Примеры команд
1. Звонки:
   - "Позвони Ивану"
   - "Набери маме"
   - "Позвони на номер +79001234567"
   - "Вызови Петра Ивановича"

2. SMS:
   - "Отправь SMS Ивану с текстом Привет, как дела?"
   - "Напиши сообщение маме Буду поздно"
   - "Отправь SMS на номер +79001234567 Перезвони мне"

## Технические детали
- Минимальная версия Android: API 24
- Целевая версия Android: API 34
- Основные компоненты:
  - TextToSpeech для синтеза речи
  - SpeechRecognizer для распознавания речи
  - ContactsContract для работы с контактами
  - SmsManager для отправки SMS
  - AlertDialog для диалогов подтверждения
- Используется CameraX для работы с камерой
- Gemini для анализа изображений
- TextToSpeech для озвучивания результатов
- Retrofit для API запросов

## Разрешения
- RECORD_AUDIO: для распознавания речи
- READ_CONTACTS: для доступа к контактам
- CALL_PHONE: для совершения звонков
- SEND_SMS: для отправки сообщений
- READ_PHONE_STATE: для работы с телефонией 

## Структура проекта

- `CameraActivity.java` - Активность для работы с камерой
- `VoiceChatActivity.java` - Основная активность голосового помощника
- `CommandProcessor.java` - Обработчик голосовых команд
- `activity_camera.xml` - Layout для камеры 